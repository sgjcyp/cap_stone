MODELLING PRICE SPLIT DATA !!!!!!!!!!!!!

RUNNING LINEAR REGRESSION .................  :  Lin_lt5C
                            OLS Regression Results                            
==============================================================================
Dep. Variable:                  price   R-squared:                       0.615
Model:                            OLS   Adj. R-squared:                  0.610
Method:                 Least Squares   F-statistic:                     115.0
Date:                Mon, 13 Aug 2018   Prob (F-statistic):               0.00
Time:                        08:06:45   Log-Likelihood:                -19471.
No. Observations:                3505   AIC:                         3.904e+04
Df Residuals:                    3456   BIC:                         3.934e+04
Df Model:                          48                                         
Covariance Type:            nonrobust                                         
==========================================================================================
                             coef    std err          t      P>|t|      [0.025      0.975]
------------------------------------------------------------------------------------------
const                    -10.6210     65.382     -0.162      0.871    -138.812     117.570
host_is_superhost          4.4639      2.363      1.889      0.059      -0.169       9.096
host_identity_verified     7.8694      2.359      3.336      0.001       3.244      12.495
accommodates              14.8368      1.270     11.682      0.000      12.347      17.327
bathrooms                 15.0908      2.350      6.420      0.000      10.482      19.699
bedrooms                  35.3597      2.279     15.514      0.000      30.891      39.828
beds                      -8.3203      1.860     -4.474      0.000     -11.967      -4.674
bed_type                  -2.0241      9.253     -0.219      0.827     -20.165      16.117
cleaning_fee               0.2412      0.024      9.875      0.000       0.193       0.289
guests_included            2.6098      1.050      2.486      0.013       0.552       4.668
room_type_full            97.5179     10.586      9.212      0.000      76.763     118.272
room_type_pvt             46.0434     10.368      4.441      0.000      25.715      66.372
amentcnt                   0.3493      0.110      3.183      0.001       0.134       0.564
min_night_stay_long      -27.2773     17.051     -1.600      0.110     -60.709       6.155
min_night_stay_mid       -37.1264      3.035    -12.232      0.000     -43.077     -31.175
ppt_condensed_apt        -42.3200     10.110     -4.186      0.000     -62.143     -22.497
ppt_condensed_aptspl     -54.2691     13.933     -3.895      0.000     -81.587     -26.951
ppt_condensed_auto       -99.3112     46.201     -2.150      0.032    -189.894      -8.728
ppt_condensed_hostel     -66.5349     15.463     -4.303      0.000     -96.853     -36.217
ppt_condensed_hotel       -4.0631     11.863     -0.343      0.732     -27.322      19.195
ppt_condensed_house      -37.1098     10.313     -3.598      0.000     -57.330     -16.890
ppt_condensed_other      -23.5655     18.555     -1.270      0.204     -59.945      12.814
zipcode_94014.0          -20.6772     64.491     -0.321      0.749    -147.122     105.767
zipcode_94015.0           18.2737     77.269      0.236      0.813    -133.223     169.770
zipcode_94102.0           59.4280     63.414      0.937      0.349     -64.904     183.760
zipcode_94103.0           38.9137     63.335      0.614      0.539     -85.265     163.092
zipcode_94104.0           39.4491     89.332      0.442      0.659    -135.699     214.597
zipcode_94105.0           89.5277     65.399      1.369      0.171     -38.697     217.752
zipcode_94107.0           33.7246     63.358      0.532      0.595     -90.498     157.948
zipcode_94108.0           82.1999     63.587      1.293      0.196     -42.473     206.873
zipcode_94109.0           59.3702     63.316      0.938      0.348     -64.771     183.511
zipcode_94110.0           23.1615     63.188      0.367      0.714    -100.729     147.052
zipcode_94111.0           53.2439     65.907      0.808      0.419     -75.976     182.464
zipcode_94112.0          -17.7002     63.296     -0.280      0.780    -141.801     106.400
zipcode_94114.0           47.4868     63.242      0.751      0.453     -76.508     171.482
zipcode_94115.0           55.9102     63.344      0.883      0.377     -68.285     180.105
zipcode_94116.0          -13.9689     63.434     -0.220      0.826    -138.340     110.402
zipcode_94117.0           37.0674     63.264      0.586      0.558     -86.970     161.105
zipcode_94118.0           15.6474     63.363      0.247      0.805    -108.586     139.881
zipcode_94121.0           13.1417     63.444      0.207      0.836    -111.250     137.533
zipcode_94122.0           -0.2751     63.324     -0.004      0.997    -124.431     123.881
zipcode_94123.0           64.0799     63.491      1.009      0.313     -60.403     188.563
zipcode_94124.0          -21.4431     63.534     -0.338      0.736    -146.011     103.125
zipcode_94127.0            2.5990     63.572      0.041      0.967    -122.043     127.241
zipcode_94129.0         1.185e-13   4.97e-14      2.383      0.017     2.1e-14    2.16e-13
zipcode_94131.0           21.1189     63.341      0.333      0.739    -103.071     145.309
zipcode_94132.0          -16.4640     63.896     -0.258      0.797    -141.742     108.815
zipcode_94133.0           67.2068     63.441      1.059      0.290     -57.180     191.593
zipcode_94134.0          -25.9473     63.687     -0.407      0.684    -150.815      98.920
zipcode_94158.0           66.8028     66.932      0.998      0.318     -64.427     198.033
==============================================================================
Omnibus:                      575.857   Durbin-Watson:                   2.003
Prob(Omnibus):                  0.000   Jarque-Bera (JB):             2190.146
Skew:                           0.779   Prob(JB):                         0.00
Kurtosis:                       6.546   Cond. No.                     1.25e+16
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The smallest eigenvalue is 2.09e-25. This might indicate that there are
strong multicollinearity problems or that the design matrix is singular.

   **************** Metrics for :  Lin_lt5C  *******************
   R2 (Variance Squared ERROR)                   = 0.6255
   MSE (Mean Squared ERROR)                      = 3561.5455
   RMSE (ROOT Mean Squared ERROR)                = 59.6787
   RMSLE (ROOT Mean Squared Logrithmic ERROR)    = 0.4069
   PCTE  (Percent Absolute Error)                = 0.3189

   Baseline Mean Absolute Error                  = 77.42548779203487
   Predicted Mean Absolute Error                 = 45.545380421542795
   Accuracy  (100-MAPE mean absolute PCT ERR)    = 68.11 %

   **************** -------------------------- ******************* 877 4.519860904486346

RUNNING RANDOM FOREST .................  : RF_lt5C

   **************** Metrics for :  RF_lt5C  *******************
   R2 (Variance Squared ERROR)                   = 0.6420
   MSE (Mean Squared ERROR)                      = 3404.5837
   RMSE (ROOT Mean Squared ERROR)                = 58.3488
   RMSLE (ROOT Mean Squared Logrithmic ERROR)    = 0.3368
   PCTE  (Percent Absolute Error)                = 0.2921

   Baseline Mean Absolute Error                  = 77.42548779203487
   Predicted Mean Absolute Error                 = 42.08878301667925
   Accuracy  (100-MAPE mean absolute PCT ERR)    = 70.79 %

   **************** -------------------------- ******************* 877 4.793743778431826
          1 0.36251502316947526
          5 0.6069084348001449
          10 0.6419964449771263
          15 0.6538637689273343
          25 0.6661192761941022
          50 0.6723172239302699
          100 0.6732565849117348
          150 0.6724063930373041
          200 0.6718714565672512
          250 0.6726619102088365
          300 0.6739348238899352
          400 0.6730944678565933
          500 0.6726507062773008
          700 0.6724118494137681
          900 0.6724938754569088
          1200 0.6726056141475579
          1500 0.6732071590107402
          1800 0.6731703772459418
          2000 0.6731800159786846
Fitting 3 folds for each of 100 candidates, totalling 300 fits
{'n_estimators': 200, 'min_samples_split': 5, 'min_samples_leaf': 1, 'max_features': 'sqrt', 'max_depth': 40, 'bootstrap': False}
0.6460236542546969
   ********************* BASE MODEL Performance *********************
   R2 Score = 0.62.
   Average Error: 42.5778
   Accuracy = 70.56%.
   ********************* RANDOM MODEL Performance *********************
   R2 Score = 0.69.
   Average Error: 39.4377
   Accuracy = 73.29%.
Improvement of 3.87%.

   **************** Metrics for :  RF_lt5CBFF  *******************
   R2 (Variance Squared ERROR)                   = 0.6924
   MSE (Mean Squared ERROR)                      = 2925.6021
   RMSE (ROOT Mean Squared ERROR)                = 54.0888
   RMSLE (ROOT Mean Squared Logrithmic ERROR)    = 0.3088
   PCTE  (Percent Absolute Error)                = 0.2671

   Baseline Mean Absolute Error                  = 77.42548779203487
   Predicted Mean Absolute Error                 = 39.43766366723823
   Accuracy  (100-MAPE mean absolute PCT ERR)    = 73.29 %

   **************** -------------------------- ******************* 877 4.037248572034948

RUNNING GRADIENT BOOST REGRESSION .................  : GB_lt5C
MSE: 3178.2445

   **************** Metrics for :  GB_lt5C  *******************
   R2 (Variance Squared ERROR)                   = 0.6658
   MSE (Mean Squared ERROR)                      = 3178.2445
   RMSE (ROOT Mean Squared ERROR)                = 56.3759
   RMSLE (ROOT Mean Squared Logrithmic ERROR)    = 0.3315
   PCTE  (Percent Absolute Error)                = 0.2970

   Baseline Mean Absolute Error                  = 77.42548779203487
   Predicted Mean Absolute Error                 = 41.98842943005705
   Accuracy  (100-MAPE mean absolute PCT ERR)    = 70.3 %

   **************** -------------------------- ******************* 877 4.452239673714656
          1 0.09213376670931395
          5 0.3392888321869707
          10 0.4770830864470619
          15 0.5374659690602392
          25 0.5934108356361862
          50 0.6385775412129935
          100 0.6657967887364695
          150 0.6780519142213222
          200 0.6809542266877775
          250 0.6836190457011793
          300 0.6846468314940253
          400 0.6859269368785605
          500 0.6844470572678002
          700 0.6843725844358275
          900 0.6812871523107623
          1200 0.679264905468314
          1500 0.6732304850712836
          1800 0.6696682391993909
          2000 0.6675386417946141
Fitting 3 folds for each of 100 candidates, totalling 300 fits
{'n_estimators': 1000, 'min_samples_split': 10, 'min_samples_leaf': 4, 'max_features': 'sqrt', 'max_depth': 60, 'learning_rate': 0.01}
0.6434796316627852
   ********************* BASE MODEL Performance *********************
   R2 Score = 0.67.
   Average Error: 41.9884
   Accuracy = 70.30%.
   ********************* RANDOM MODEL Performance *********************
   R2 Score = 0.70.
   Average Error: 38.1209
   Accuracy = 74.93%.
   Improvement of 6.59%.

   **************** Metrics for :  GB_lt5CBFF  *******************
   R2 (Variance Squared ERROR)                   = 0.6953
   MSE (Mean Squared ERROR)                      = 2897.9824
   RMSE (ROOT Mean Squared ERROR)                = 53.8329
   RMSLE (ROOT Mean Squared Logrithmic ERROR)    = 0.3000
   PCTE  (Percent Absolute Error)                = 0.2507

   Baseline Mean Absolute Error                  = 77.42548779203487
   Predicted Mean Absolute Error                 = 38.120869061830916
   Accuracy  (100-MAPE mean absolute PCT ERR)    = 74.93 %

   **************** -------------------------- ******************* 877 3.7759758663924337

PROCESSING INPUT DATASET .................
(14312, 22)

PROCESSING INPUT DATASET .................
(4662, 22)
MODELLING TIME SPLIT DATA !!!!!!!!!!!!!

RUNNING LINEAR REGRESSION .................  :  Lin_t07
                            OLS Regression Results                            
==============================================================================
Dep. Variable:                  price   R-squared:                       0.547
Model:                            OLS   Adj. R-squared:                  0.546
Method:                 Least Squares   F-statistic:                     772.4
Date:                Mon, 13 Aug 2018   Prob (F-statistic):               0.00
Time:                        08:25:47   Log-Likelihood:                -75926.
No. Observations:               13482   AIC:                         1.519e+05
Df Residuals:                   13460   BIC:                         1.521e+05
Df Model:                          21                                         
Covariance Type:            nonrobust                                         
==========================================================================================
                             coef    std err          t      P>|t|      [0.025      0.975]
------------------------------------------------------------------------------------------
const                      3.7343      6.972      0.536      0.592      -9.931      17.400
host_is_superhost          3.5934      1.252      2.870      0.004       1.139       6.048
host_identity_verified    12.1283      1.296      9.359      0.000       9.588      14.668
accommodates              16.9463      0.663     25.558      0.000      15.647      18.246
bathrooms                 -0.5666      0.947     -0.598      0.550      -2.423       1.290
bedrooms                  25.5763      1.095     23.354      0.000      23.430      27.723
beds                     -11.2283      0.979    -11.472      0.000     -13.147      -9.310
bed_type                   4.0863      4.667      0.876      0.381      -5.062      13.235
cleaning_fee               0.3071      0.014     22.724      0.000       0.281       0.334
guests_included            3.7023      0.565      6.552      0.000       2.595       4.810
room_type_full            93.4035      4.743     19.693      0.000      84.107     102.700
room_type_pvt             41.3221      4.640      8.906      0.000      32.228      50.417
amentcnt                   0.2817      0.060      4.671      0.000       0.164       0.400
min_night_stay_long      -31.5283      8.643     -3.648      0.000     -48.471     -14.586
min_night_stay_mid       -30.7722      1.670    -18.425      0.000     -34.046     -27.498
ppt_condensed_apt         -6.8474      3.547     -1.931      0.054     -13.799       0.105
ppt_condensed_aptspl      -4.2070      5.565     -0.756      0.450     -15.115       6.701
ppt_condensed_auto        -9.2814     21.700     -0.428      0.669     -51.817      33.255
ppt_condensed_hostel     -16.3763      7.053     -2.322      0.020     -30.201      -2.552
ppt_condensed_hotel       39.6131      4.615      8.583      0.000      30.567      48.660
ppt_condensed_house      -17.5403      3.639     -4.820      0.000     -24.674     -10.407
ppt_condensed_other       13.1141      8.047      1.630      0.103      -2.659      28.887
==============================================================================
Omnibus:                     2223.111   Durbin-Watson:                   1.808
Prob(Omnibus):                  0.000   Jarque-Bera (JB):             5540.921
Skew:                           0.923   Prob(JB):                         0.00
Kurtosis:                       5.541   Cond. No.                     3.51e+03
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
[2] The condition number is large, 3.51e+03. This might indicate that there are
strong multicollinearity or other numerical problems.

   **************** Metrics for :  Lin_t07  *******************
   R2 (Variance Squared ERROR)                   = 0.5402
   MSE (Mean Squared ERROR)                      = 4618.9389
   RMSE (ROOT Mean Squared ERROR)                = 67.9628
   RMSLE (ROOT Mean Squared Logrithmic ERROR)    = 0.3771
   PCTE  (Percent Absolute Error)                = 0.3327

   Baseline Mean Absolute Error                  = 79.72063570296392
   Predicted Mean Absolute Error                 = 50.37931521964294
   Accuracy  (100-MAPE mean absolute PCT ERR)    = 66.73 %

   **************** -------------------------- ******************* 4382 4.901069196186545

RUNNING RANDOM FOREST .................  : RF_t07

   **************** Metrics for :  RF_t07  *******************
   R2 (Variance Squared ERROR)                   = 0.8508
   MSE (Mean Squared ERROR)                      = 1498.5267
   RMSE (ROOT Mean Squared ERROR)                = 38.7108
   RMSLE (ROOT Mean Squared Logrithmic ERROR)    = 0.2229
   PCTE  (Percent Absolute Error)                = 0.1387

   Baseline Mean Absolute Error                  = 79.72063570296392
   Predicted Mean Absolute Error                 = 20.845523906120416
   Accuracy  (100-MAPE mean absolute PCT ERR)    = 86.13 %

   **************** -------------------------- ******************* 4382 3.17249903287761
          1 0.7092062980546894
          5 0.8348107831726959
          10 0.850828447348345
          15 0.8524870521871633
          25 0.857987040460279
          50 0.8612911251074915
          100 0.8643358358413538
          150 0.8654498475127815
          200 0.8656329447912604
          250 0.8662225600045866
          300 0.8663851957470585
          400 0.8670212154423133
          500 0.8670105013819642
          700 0.8668477589664683
          900 0.8667993247256756
          1200 0.8667971712837054
          1500 0.8667795101682334
          1800 0.8667373708946982
          2000 0.8667217462763447
Fitting 3 folds for each of 100 candidates, totalling 300 fits
{'n_estimators': 200, 'min_samples_split': 2, 'min_samples_leaf': 1, 'max_features': 'sqrt', 'max_depth': None, 'bootstrap': False}
0.9022104998958425
   ********************* BASE MODEL Performance *********************
   R2 Score = 0.85.
   Average Error: 20.8716
   Accuracy = 86.09%.
   ********************* RANDOM MODEL Performance *********************
   R2 Score = 0.88.
   Average Error: 15.2912
   Accuracy = 89.75%.
Improvement of 4.25%.

   **************** Metrics for :  RF_t07BFF  *******************
   R2 (Variance Squared ERROR)                   = 0.8821
   MSE (Mean Squared ERROR)                      = 1184.0512
   RMSE (ROOT Mean Squared ERROR)                = 34.4100
   RMSLE (ROOT Mean Squared Logrithmic ERROR)    = 0.1981
   PCTE  (Percent Absolute Error)                = 0.1025

   Baseline Mean Absolute Error                  = 79.72063570296392
   Predicted Mean Absolute Error                 = 15.291190268723868
   Accuracy  (100-MAPE mean absolute PCT ERR)    = 89.75 %

   **************** -------------------------- ******************* 4382 2.8965548620198165

RUNNING GRADIENT BOOST REGRESSION .................  : GB_t07
MSE: 3530.7247

   **************** Metrics for :  GB_t07  *******************
   R2 (Variance Squared ERROR)                   = 0.6485
   MSE (Mean Squared ERROR)                      = 3530.7247
   RMSE (ROOT Mean Squared ERROR)                = 59.4199
   RMSLE (ROOT Mean Squared Logrithmic ERROR)    = 0.3321
   PCTE  (Percent Absolute Error)                = 0.2866

   Baseline Mean Absolute Error                  = 79.72063570296392
   Predicted Mean Absolute Error                 = 43.22666274123279
   Accuracy  (100-MAPE mean absolute PCT ERR)    = 71.34 %

   **************** -------------------------- ******************* 4382 4.62343024284627
          1 0.09777322047145655
          5 0.3410807157911606
          10 0.47197986896945565
          15 0.5355614588985638
          25 0.5917079592534047
          50 0.6263004103163644
          100 0.6485323326079184
          150 0.6608198378414026
          200 0.6680562640604413
          250 0.6736418832407212
          300 0.6785056946442607
          400 0.686988436452378
          500 0.6953702428547057
          700 0.7066135938141538
          900 0.716443508227536
          1200 0.7240881074990094
          1500 0.7302692623884706
          1800 0.7354813198507856
          2000 0.7388213694865746
Fitting 3 folds for each of 100 candidates, totalling 300 fits
{'n_estimators': 1000, 'min_samples_split': 2, 'min_samples_leaf': 2, 'max_features': 'sqrt', 'max_depth': 110, 'learning_rate': 0.01}
0.9048278208547157
   ********************* BASE MODEL Performance *********************
   R2 Score = 0.65.
   Average Error: 43.2267
   Accuracy = 71.34%.
   ********************* RANDOM MODEL Performance *********************
   R2 Score = 0.88.
   Average Error: 15.9093
   Accuracy = 89.35%.
   Improvement of 25.25%.

   **************** Metrics for :  GB_t07BFF  *******************
   R2 (Variance Squared ERROR)                   = 0.8817
   MSE (Mean Squared ERROR)                      = 1188.7231
   RMSE (ROOT Mean Squared ERROR)                = 34.4779
   RMSLE (ROOT Mean Squared Logrithmic ERROR)    = 0.1991
   PCTE  (Percent Absolute Error)                = 0.1065

   Baseline Mean Absolute Error                  = 79.72063570296392
   Predicted Mean Absolute Error                 = 15.909339772204795
   Accuracy  (100-MAPE mean absolute PCT ERR)    = 89.35 %

   **************** -------------------------- ******************* 4382 2.874148697255247
ANALYZING PREDICTIONS !!!!!!!!!!!!!
[1, 2, 0, 3, 4, 5, 7, 6]
[0, 1, 2, 3, 4, 5, 6, 7]
  bedrooms Z_test_LIN_lt5c      ...      Z_test_RF_t07 Z_test_GB_t07
0      0.0        0.329909      ...           0.092926      0.095966
1      1.0        0.344848      ...           0.112465      0.117750
2      2.0        0.260422      ...           0.088335      0.091680
3      3.0        0.264096      ...           0.076933      0.074425
4      4.0        0.183936      ...           0.070296      0.069100

[5 rows x 7 columns]
[2, 4, 1, 3, 6, 5, 8, 7, 10, 12, 9, 14, 11, 13]
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
  accommodates Z_test_LIN_lt5c      ...      Z_test_RF_t07 Z_test_GB_t07
0          1.0        0.456745      ...           0.093643      0.096727
1          2.0        0.317381      ...           0.118453      0.123919
2          3.0        0.287953      ...           0.085794      0.090436
3          4.0        0.294442      ...           0.105296      0.107309
4          5.0        0.348391      ...           0.073542      0.075503

[5 rows x 7 columns]
[1.0, 2.0, 1.5, 0.0, 2.5, 3.0, 4.0, 0.5, 5.0, 3.5, 7.0, 4.5, 6.5]
[0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 4.5, 5.0, 6.5, 7.0]
  bathrooms Z_test_LIN_lt5c      ...      Z_test_RF_t07 Z_test_GB_t07
0       0.0        0.466041      ...           0.098429      0.101275
1       0.5        0.117772      ...           0.135020      0.132747
2       1.0        0.309044      ...           0.106821      0.111862
3       1.5        0.377857      ...           0.091315      0.090724
4       2.0        0.266934      ...           0.092065      0.095123

[5 rows x 7 columns]
[1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 0.0, 7.0, 14.0, 8.0, 10.0]
[0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 10.0, 14.0]
  beds Z_test_LIN_lt5c      ...      Z_test_RF_t07 Z_test_GB_t07
0  0.0        0.434190      ...           0.101427      0.106954
1  1.0        0.337895      ...           0.108028      0.113061
2  2.0        0.272092      ...           0.106894      0.110861
3  3.0        0.302300      ...           0.080534      0.082744
4  4.0        0.317153      ...           0.086549      0.083280

[5 rows x 7 columns]
[1, 0]
[0, 1]
  bed_type Z_test_LIN_lt5c      ...      Z_test_RF_t07 Z_test_GB_t07
0      0.0        0.393035      ...           0.034569      0.038902
1      1.0        0.317297      ...           0.103538      0.107532

[2 rows x 7 columns]
MODELLING PROCESS COMPLETE !!!!!!!!!!!!!!!!!!!!!!! 
